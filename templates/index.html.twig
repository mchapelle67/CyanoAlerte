{% extends 'base.html.twig' %}

{% block metadescription %}{% endblock %}
{% block keywords %}{% endblock %}
{% block robots %}index, follow{% endblock %}

{% block title %}CyanoAlerte - Surveillance des Cyanobactéries{% endblock %}

{% block body %}
<main id="wrapper">
    <section class="hero">
        <figure class="hero-figure">
            <img 
                fetchpriority="high"
                loading="eager"
                decoding="async"
                src="{{ asset('images/lac.jpg') }}" 
                {# srcset="
                    ../images/lac-960.jpg 960w,
                    ../images/lac-1536.jpg 1536w,
                    ../images/lac-2048.jpg 2048w,
                    ../images/lac-2560.jpg 2560w
                "
                sizes="100vw" #}
                alt="Image de fond composé d'une forme géométrique"
                class="object-cover w-full h-full">
            <div class="absolute inset-0 bg-gradient-to-b from-black/50 via-black/20 to-transparent"></div>
        </figure>
        <div class="hero-content">
            <div class="backdrop-blur-sm bg-white/10 rounded-3xl p-8 lg:p-12 shadow-2xl border border-white/20 max-w-4xl">
                <h1 class="custom-h1 text-white drop-shadow-lg mb-6">
                    Protégez les <span class="text-blue-300 font-semibold">eaux</span>, <br>
                    signalez les <span class="text-green-300 font-semibold">cyanobactéries</span>
                </h1>
                <p class="custom-p text-white/90 drop-shadow-md mb-8 leading-relaxed">
                    Signalez et consultez les alertes de cyanobactéries dans les lacs, rivières et étangs.<br>
                    Aidez à protéger la santé publique et l'environnement aquatique.
                </p>
                <div class="flex gap-4 justify-center flex-wrap">
                   <twig:PrimaryButton 
                        text="Découvrir la carte"
                        class="font-medium text-lg hover:-translate-y-1"
                    />
                   <twig:SecondaryButton 
                        text="Voir les alertes"
                        class="font-medium text-lg"
                    />
                </div>
            </div>
        </div>
    </section>
    {% include 'sections/_flashMessages.html.twig' %}
    <section class="custom-padding flex gap-6">
        {% include 'sections/_map.html.twig' %}
        <section class="w-[40%]">
            <div class="p-5 bg-white custom-border mb-4">
                <h2 class="flex gap-3 items-center custom-h2 text-green-800 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" height="25" width="25" viewBox="0 0 640 640"><!--!Font Awesome Free v7.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path fill="#166534" d="M480 272C480 317.9 465.1 360.3 440 394.7L566.6 521.4C579.1 533.9 579.1 554.2 566.6 566.7C554.1 579.2 533.8 579.2 521.3 566.7L394.7 440C360.3 465.1 317.9 480 272 480C157.1 480 64 386.9 64 272C64 157.1 157.1 64 272 64C386.9 64 480 157.1 480 272zM272 416C351.5 416 416 351.5 416 272C416 192.5 351.5 128 272 128C192.5 128 128 192.5 128 272C128 351.5 192.5 416 272 416z"/></svg>
                    Rechercher par zone
                </h2>
                <input type="text" class="zone w-full p-2 rounded border-gray-300 focus:border-blue-300 placeholder-gray-400" name="zone" id="zone" placeholder="Saisir une ville ou un département...">                    
                    <ul id="zoneResults" class="mt-2"></ul>
            </div>
            <div class="p-5 bg-white custom-border">
                <h2 class="flex items-center gap-3 custom-h2 pb-3 text-center text-green-800">
                    <svg xmlns="http://www.w3.org/2000/svg" height="25" width="25" viewBox="0 0 640 640"><!--!Font Awesome Free v7.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path fill="#166534" d="M528 320C528 434.9 434.9 528 320 528C205.1 528 112 434.9 112 320C112 205.1 205.1 112 320 112C434.9 112 528 205.1 528 320zM64 320C64 461.4 178.6 576 320 576C461.4 576 576 461.4 576 320C576 178.6 461.4 64 320 64C178.6 64 64 178.6 64 320zM296 184L296 320C296 328 300 335.5 306.7 340L402.7 404C413.7 411.4 428.6 408.4 436 397.3C443.4 386.2 440.4 371.4 429.3 364L344 307.2L344 184C344 170.7 333.3 160 320 160C306.7 160 296 170.7 296 184z"/></svg>
                    Dernières alertes
                </h2>
                {# {% for alert in latestAlerts %}
                    <div class="mb-4 p-4 bg-gray-100 rounded-lg border border-gray-300">
                        <h3 class="text-lg font-semibold text-gray-800">{{ alert.location }}</h3>
                        <p class="text-sm text-gray-600">{{ alert.description }}</p>
                        <p class="text-xs text-gray-500 mt-2">{{ alert.createdAt|date('d M Y H:i') }}</p>
                    </div>
                {% else %} #}
                    <p class="text-center text-gray-600 py-6 border-t-2">
                        Aucune alerte récente. Signalez une suspicion de cyanobactéries en cliquant directement sur la carte.
                    </p>                
                {# {% endfor %} #}
            </div>
        </section>
    </section>
    <section class="pb-4 flex w-full mx-auto justify-center px-10 gap-6">
        <twig:Card
        icon='<img src="{{ asset("images/icons/alerte.png") }}" alt="Icône alerte" class="w-10 h-10" />'
        title="Alertes actives"
        subtitle="signalements en cours"
        number="42"
        color="text-blue-600"
        />
        <twig:Card
        icon='<img src="{{ asset("images/icons/localisateur.png") }}" alt="Icône zones surveillées" class="w-10 h-10" />'
        title="Zones surveillées"
        subtitle="départements couverts"
        number="10"
        color="text-green-700"
        />
        <twig:Card
        icon='<img src="{{ asset("images/icons/line-up.png") }}" alt="Icône alertes prioritaires" class="w-10 h-10" />'
        title="Niveau élevé"
        subtitle="alertes prioritaires"
        number="5"
        color="text-red-600"
        />
        <twig:Card
        icon='<img src="{{ asset("images/icons/calendar.png") }}" alt="Icône nouveaux signalements" class="w-10 h-10" />'
        title="Nouveaux signalements"
        subtitle="cette semaine"
        number="12"
        color="text-orange-600"
        />
    </section>
    <button><a href="{{ path('app_alerts') }}">Voir toutes les alertes</a></button>
</main>
{% endblock %}
