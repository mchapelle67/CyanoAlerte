<!-- Main modal -->
<div id="report-modal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="relative p-4 w-full max-w-2xl max-h-full">
        <!-- Modal content -->
        <div class="relative bg-white rounded-lg shadow-sm p-8 border border-gray-200">
            <!-- Modal header -->
            <div class="flex items-center justify-between rounded-t">
                <div class="flex flex-col">
                    <h3 class="flex items-center gap-2 text-2xl mb-2 font-medium text-red-700 mt-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7" viewBox="0 0 640 640"><!--!Font Awesome Free v7.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path fill="currentColor" d="M144 88C144 74.7 133.3 64 120 64C106.7 64 96 74.7 96 88L96 552C96 565.3 106.7 576 120 576C133.3 576 144 565.3 144 552L144 452L224.3 431.9C265.4 421.6 308.9 426.4 346.8 445.3C391 467.4 442.3 470.1 488.5 452.7L523.2 439.7C535.7 435 544 423.1 544 409.7L544 130C544 107 519.8 92 499.2 102.3L489.6 107.1C443.3 130.3 388.8 130.3 342.5 107.1C307.4 89.5 267.1 85.1 229 94.6L144 116L144 88zM144 165.5L240.6 141.3C267.6 134.6 296.1 137.7 321 150.1C375.9 177.5 439.7 179.8 496 156.9L496 398.7L471.6 407.8C437.9 420.4 400.4 418.5 368.2 402.4C320 378.3 264.9 372.3 212.6 385.3L144 402.5L144 165.5z"/></svg>
                            Signaler une alerte
                    </h3>
                    <p class="text-gray-600 text-sm">Aidez-nous à maintenir la qualité des informations en signalant les alertes problématiques.</p>
                </div>
                <button type="button" id="close-report-modal-btn" data-report-modal-close class="absolute top-4 right-4 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white">
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                    </svg>
                    <span class="sr-only">Annuler</span>
                </button>
            </div>
            <div class="mt-8 rounded-lg border-gray-200 border p-4 space-y-2 bg-gray-100">
                <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 shrink-0 text-gray-900" viewBox="0 0 640 640"><!--!Font Awesome Free v7.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path fill="currentColor" d="M320 576C178.6 576 64 461.4 64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576zM320 112C205.1 112 112 205.1 112 320C112 434.9 205.1 528 320 528C434.9 528 528 434.9 528 320C528 205.1 434.9 112 320 112zM320 448C302.3 448 288 433.7 288 416C288 398.3 302.3 384 320 384C337.7 384 352 398.3 352 416C352 433.7 337.7 448 320 448zM320 192C338.2 192 352.7 207.5 351.4 225.7L344 329.7C343.1 342.3 332.6 352 320.1 352C307.5 352 297.1 342.3 296.2 329.7L288.8 225.7C287.3 207.5 301.8 192 320 192z"/></svg>
                    <span class="text-gray-900 text-lg">{{ alert.waterbody.name }}</span>
                </div>
                <span class="text-gray-600">{{ alert.waterbody.city }}, {{ alert.waterbody.department }}</span>
            </div>
            <!-- Modal body -->
            <div class="mt-6">
                {{ form_start(report_form, {'attr': {'class': 'space-y-6'}}) }}
                <div class="flex flex-col gap-2">
                    <label class="font-medium text-gray-800 mb-1">{{ report_form.reason.vars.label }}</label>
                    {% for choice in report_form.reason %}
                        <label class="flex items-center gap-3 rounded-lg border border-gray-300 bg-white px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors">
                            {{ form_widget(choice, {'attr': {'class': 'h-5 w-5 text-red-600 border-gray-300 focus:ring-red-200'}}) }}
                            <span class="text-gray-800 text-base">{{ choice.vars.label|raw }}</span>
                        </label>
                    {% endfor %}
                    {{ form_errors(report_form.reason) }}
                </div>
                <div class="space-y-3">
                    <label class="font-medium text-gray-800 mb-1">{{ report_form.comment.vars.label }}</label>
                    {{ form_widget(report_form.comment, {'attr': {'class': 'w-full rounded-lg border border-gray-300 bg-gray-50 p-3 text-gray-800 placeholder-gray-400 focus:border-red-300 focus:ring focus:ring-red-100'}}) }}
                    {{ form_errors(report_form.comment) }}
                </div>
                <div class="mt-6 flex justify-end gap-4">
                    <button type="button" id="cancel-report-btn" data-report-modal-close class="font-medium px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-200 transition-colors">
                        Annuler
                    </button>
                    {{ form_widget(report_form.submit, {'attr': {'class': 'font-medium px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors'}}) }}
                </div>
                {{ form_end(report_form) }}
            </div>
        </div>
    </div>
</div>