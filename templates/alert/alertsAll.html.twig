{% extends 'base.html.twig' %}

{% block metadescription %}{% endblock %}
{% block keywords %}{% endblock %}
{% block robots %}index, follow{% endblock %}

{% block title %}CyanoAlerte - Liste des alertes de cyanobactéries{% endblock %}

{% block body %}
<main class="bg-blue-50 min-h-screen">
    <section class="bg-white/90 backdrop-blur-sm p-4 border-b border-gray-100">
        <a href="{{ path('app_home') }}" class="inline-flex items-center mx-6 py-2 px-4 rounded-lg hover:shadow-md hover:bg-gray-100 transition-all duration-200 font-medium text-gray-600">
            <svg class="h-5 w-5 mr-3 text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M73.4 297.4C60.9 309.9 60.9 330.2 73.4 342.7L233.4 502.7C245.9 515.2 266.2 515.2 278.7 502.7C291.2 490.2 291.2 469.9 278.7 457.4L173.3 352L544 352C561.7 352 576 337.7 576 320C576 302.3 561.7 288 544 288L173.3 288L278.7 182.6C291.2 170.1 291.2 149.8 278.7 137.3C266.2 124.8 245.9 124.8 233.4 137.3L73.4 297.3z"/></svg>
            Retour à l'accueil
        </a>
    </section>

    <section class="custom-padding">
        <h1 class="custom-h1 text-center text-green-800">Liste des alertes de cyanobactéries</h1>
        <p class="text-lg/8 text-center text-gray-600 py-4 max-w-3xl mx-auto">
            Consultez l'ensemble des signalements de cyanobactéries. Utilisez les filtres pour rechercher par secteur ou par niveau d'alerte.
        </p>
        {{ include('sections/_searchbar.html.twig') }}
    </section>

    <section class="custom-padding">
        {% for alert in alertsData.alerts %}
        <div class="mb-4">
            <article class="p-5 bg-white custom-border border border-gray-200 hover:shadow-xl transition-all duration-300">
                <div class="flex flex-wrap items-start justify-between gap-3 mb-3">
                    <h2 class="text-2xl font-semibold text-green-800 leading-tight">{{ alert.waterbody.name }} {{ alert.waterbody.type is iterable ? (alert.waterbody.type.label ?? alert.waterbody.type.type ?? 'Type non renseigné') : (alert.waterbody.type ?? 'Type non renseigné') }}</h2>
                    <span class="text-xs font-medium bg-blue-50 text-blue-700 px-3 py-1 rounded-full">{{ alert.created_at|date('d/m/Y') }}</span>
                </div>

                <p class="text-gray-700 mb-1"><strong>Localisation :</strong> {{ alert.waterbody.city ?? 'Ville non renseignée' }}, Département {{ alert.waterbody.department ?? 'N/A' }}</p>
                <p class="text-gray-700 mb-4"><strong>Description :</strong> {{ alert.description is defined and alert.description ? alert.description : 'Description non renseignée' }}</p>

                <a href="{{ path('app_alert_detail', { id: alert.id }) }}" class="inline-flex items-center gap-2 px-4 py-2 rounded-lg text-white bg-custom-gradient btn-hover-effect font-medium">
                    Voir les détails
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 640 640" fill="currentColor" aria-hidden="true"><path d="M438.6 297.4C451.1 309.9 451.1 330.2 438.6 342.7L278.6 502.7C266.1 515.2 245.8 515.2 233.3 502.7C220.8 490.2 220.8 469.9 233.3 457.4L338.7 352L96 352C78.3 352 64 337.7 64 320C64 302.3 78.3 288 96 288L338.7 288L233.3 182.6C220.8 170.1 220.8 149.8 233.3 137.3C245.8 124.8 266.1 124.8 278.6 137.3L438.6 297.3z"/></svg>
                </a>
            </article>
        </div>
        {% endfor %}
    </section>
</main>

{% endblock %}
