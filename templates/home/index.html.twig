{% extends 'base.html.twig' %}

{% block metadescription %}{% endblock %}
{% block keywords %}{% endblock %}
{% block robots %}index, follow{% endblock %}

{% block title %}CyanoAlerte - Surveillance des Cyanobact√©ries{% endblock %}

{% block body %}
<main class="bg-blue-50 min-h-screen">
    <h1 class="text-5xl font-medium text-center text-green-800 pt-10 font-stretch-condensed">Surveillance des Cyanobact√©ries</h1>
    <p class="text-lg/8 text-center text-gray-600 py-6">
        Signalez et consultez les alertes de cyanobact√©ries dans les lacs, rivi√®res et √©tangs.<br>
        Aidez √† prot√©ger la sant√© publique et l'environnement aquatique.
    </p>
    <div class="z-50 space-y-2">
        {% for type, messages in app.flashes %}
            {% for message in messages %}
                <div class="alert alert-{{ type }} bg-{{ type == 'success' ? 'green' : 'red' }}-100 border border-{{ type == 'success' ? 'green' : 'red' }}-400 text-{{ type == 'success' ? 'green' : 'red' }}-700 px-4 py-3 rounded relative shadow-lg flex items-center justify-between min-w-[300px] max-w-[500px] animate-slide-in" role="alert">
                    <span class="block sm:inline">{{ message }}</span>
                    <button type="button" class="ml-4 text-{{ type == 'success' ? 'green' : 'red' }}-700 hover:text-{{ type == 'success' ? 'green' : 'red' }}-900 font-bold text-xl leading-none" onclick="this.parentElement.remove()">
                        √ó
                    </button>
                </div>
            {% endfor %}
        {% endfor %}
    </div>
    {# <section class="pb-4 flex w-full">
        <div class="p-5 m-5 bg-white rounded-lg shadow-lg">
            <div>
    
            </div>
            <div>
                <h3 class="text-xl mb-1">Alertes actives</h3>
                <span>signalements en cours</span>
            </div>
        </div>
        <div class="p-5 m-5 bg-white rounded-lg shadow-lg">
            <div>
    
            </div>
            <div>
                <h3 class="text-xl mb-1">Zones surveill√©es</h3>
                <span>d√©partements couverts</span>
            </div>
        </div>
        <div class="p-5 m-5 bg-white rounded-lg shadow-lg ">
            <div>
    
            </div>
            <div>
                <h3 class="text-xl mb-1">Niveau √©lev√©</h3>
                <span>alertes prioritaires</span>
            </div>
        </div>
        <div class="p-5 m-5 bg-white rounded-lg shadow-lg ">
            <div>
    
            </div>
            <div>
                <h3 class="text-xl mb-1">Nouveaux signalements</h3>
                <span>cette semaine</span>
            </div>
        </div>
    </section> #}
    <div class="px-10 pt-3 flex gap-6">
        <section class="w-[60%] bg-white rounded-lg shadow-lg overflow-hidden relative">
            <div id="map" class="w-full h-[600px]" style="cursor: crosshair !important; z-index:0;"></div>
            <div class="absolute top-4 right-4 bg-white p-3 rounded shadow-md text-sm z-[1]">
                <p class="font-semibold mb-2">L√©gende</p>
                <div class="space-y-1">
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-red-600 rounded-full"></div>
                        <span>√âlev√©e</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-orange-400 rounded-full"></div>
                        <span>Mod√©r√©e</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-green-600 rounded-full"></div>
                        <span>Faible</span>
                    </div>
                </div>
            </div>
            <p class="absolute bottom-4 left-4 bg-white/90 p-4 text-gray-600 rounded-2xl shadow-md text-medium [z-1]">
                üí° <strong>Cliquez sur la carte</strong> pour signaler une suspicion de cyanobact√©ries
            </p>
        </section>
        <section class="w-[40%]">
            <div class="p-5 bg-white rounded-lg shadow-lg mb-4">
                <h2 class="text-2xl text-green-800 mb-4">Rechercher par zone</h2>
                <input type="text" class="zone w-full p-2 rounded border-gray-300 focus:border-blue-300 placeholder-gray-400" name="zone" id="zone" placeholder="Saisir une ville ou un d√©partement...">                    
                    <ul id="zoneResults" class="mt-2"></ul>
            </div>
            <div class="p-5 bg-white rounded-lg shadow-lg">
                <div class="flex justify-around pt-2 pb-6"> 
                    <h2 class="text-2xl text-center flex items-center text-green-800">Nouvelle alerte</h2>
                    {{ include('components/_alertForm.html.twig') }}
                </div>
                    <p class="text-center text-gray-600 py-6 border-t-2">
                        Signalez une suspision de cyanobact√©ries en remplissant le formulaire ou en cliquant directement sur la carte.
                    </p>
            </div>
        </section>
    </div>
</main>

{% endblock %}
